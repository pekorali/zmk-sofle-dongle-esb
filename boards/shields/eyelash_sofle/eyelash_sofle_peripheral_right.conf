#
# Copyright (c) 2024 The ZMK Contributors
# SPDX-License-Identifier: MIT
#

# Enable SPI
CONFIG_SPI=n
CONFIG_PWM=n
CONFIG_I2C=n
CONFIG_PWM_NRFX=n
#EXT POWER
CONFIG_ZMK_EXT_POWER=n

# assige a source id on peripheral. (no need for central)
# default zero. give an integer (<256) on all peripheral(s)
CONFIG_ZMK_SPLIT_ESB_PERIPHERAL_ID=1
CONFIG_ZMK_DISPLAY=n

CONFIG_ZMK_BATTERY=y
CONFIG_ZMK_BATTERY_REPORTING=y
CONFIG_ZMK_BATTERY_REPORT_INTERVAL=600


CONFIG_ZMK_IDLE_TIMEOUT=10000
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=600000

CONFIG_ZMK_SLEEP=y




# Force right side to be peripheral (not central)
CONFIG_ZMK_SPLIT_ROLE_CENTRAL=n

CONFIG_ZMK_USB=n

# Disable BLE entirely
CONFIG_ZMK_BLE=n

# Disable BLE split, enable ESB
CONFIG_ZMK_SPLIT_BLE=n
CONFIG_ZMK_SPLIT_WIRED=n
CONFIG_ZMK_SPLIT_ESB=y
CONFIG_ZMK_SPLIT_ESB_PERIPHERAL_ID=1

# ESB settings
CONFIG_MPSL_TIMESLOT_SESSION_COUNT=1
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_ESB_MAX_PAYLOAD_LENGTH=48

# Enable NFC pins as GPIO (for trackpoint reset on P0.10)
#CONFIG_NFCT_PINS_AS_GPIOS=y

# Enable pointing/mouse support for trackpoint
CONFIG_ZMK_POINTING=y
CONFIG_INPUT=y
CONFIG_GPIO=y

# UART-based PS/2 driver config
CONFIG_UART_INTERRUPT_DRIVEN=y

# Enable automatic crash recovery using the reset pin
# Triggers after 15 consecutive errors, 30s cooldown between attempts
# CONFIG_ZMK_INPUT_MOUSE_PS2_ENABLE_CRASH_RECOVERY=y




